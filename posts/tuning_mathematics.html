<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="shortcut icon" type="image/jpg" href="/media/icon.png"/>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>The mathematics of tuning and temperament</title>
	
	<!-- hack to use mathjax fonts with katex -->
	<link rel="stylesheet" href="../katex.css">
	<link rel="stylesheet" href="../basic.css">
	

	<!-- The loading of KaTeX is deferred to speed up page rendering -->
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>

	<!-- To automatically render math in text elements, include the auto-render extension: -->
	<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
	onload="renderMathInElement(document.body);"></script>
</head>
<body>

<div class="normal">
	<h3><a href="../">sintel</a></h3>
</div>

<hr>

<div class="normal">
<h1>The mathematics of tuning and temperament (1)</h1>
<!--<i><small>This article is aimed at people with a good grasp of mathematics and not necessarily music theory.</small></i> -->
<h2>Just intonation</h2>

<p>
Musical intervals are usually associated with frequency ratios. For example, when you play a tone of 600Hz and 400Hz together, you get a frequency ratio of \(  3/2 \), also known as the perfect fifth.

Some important intervals are: 
<ul>
<li>The octave: \( 2/1 \)</li>
<li>The perfect fifth: \( 3/2 \) </li>
<li>The major third: \( 5/4 \) </li>
</ul>
</p>
<p>
	To get the actual frequencies, a base frequency needs to be decided corresponding to \( 1/1 \). This is usually chosen as A4 = 440Hz, but you are free to choose this.
	To "add" or "subtract" intervals, we simply multiply or divide them. A major seventh is a fifth plus a major third: 
	$$ \frac{3}{2} \cdot \frac{5}{4} = \frac{15}{8} $$ 
	A minor third is a fifth minus a major third: 
	$$ \frac{3}{2} \cdot \frac{4}{5} = \frac{6}{5} $$
	We can also stack the same interval a number of times, by raising it to a power. Two times a perfect fifth makes a major ninth:
	$$ \left( \frac{3}{2} \right)^{2}  = \frac{9}{4} $$

	In this sense the intervals form a free module: \( \left({\mathbb{Q}_{> 0}, \times}\right) \) 
	This is the set of positive rational numbers (excluding 0) under multiplication.
	Because of the unique factorization theorem, the generators of this module are the prime numbers. In other words: every element of the module can be uniquely written as a product of prime numbers with integer powers: 

	$$ \forall q \in \left({\mathbb{Q}_{> 0}, \times}\right) : q = \prod_{i=0}^{\infty} p_{i}^{a_{i}} $$

	where \(p_{i} \) is the \( i \)-th prime number and \( a_{i}\in \mathbb{Z} \). For example: 

	$$ \frac{36}{35} = 2^2 \cdot 3^2 \cdot 5^{-1} \cdot 7^{-1} $$

	This way of thinking about intervals is known as <b>just intonation</b>.

</p>

<h2>Prime limits</h2>
<p>
	It is widely accepted that the most useful intervals are those with relatively small numbers. We could look only at intervals with, say, numerators and denominators below 100. The problem with this approach is that it doesn't preserve any of the algebraic structure. 
</p>
<p>
	A better way is to look at submodules. Looking at the list of important intervals above, we notice that they don't contain any prime factors higher than 5. What if we restrict the generators to be only primes up to a certain number? We will define the <b>\(\boldsymbol{p}\)-limit</b> submodule of 
	\( \left({\mathbb{Q}_{> 0}, \times}\right) \) as:
	$$
		\mathrm{J}^{p} = \left\{   q \in \mathbb{Q} \, | \, q = \prod_{i=0}^{\pi(p)} p_{i}^{a_{i}}  \right\}
	$$
	Where \( \pi(p) \) is the prime-counting function. <br>
	For example: 5-limit just intonation is just the set of intervals generated by \( \left\{ 2,3,5 \right\} \):
	$$
		\forall q \in \mathrm{J}^{5} :  \, q = 2^a \cdot 3^b \cdot  5^c \text{ with } a,b,c \in \mathbb{Z}
	$$
	While these submodules still have infinitely many elements, they are finitely generated, which makes working with them a lot easier.
</p>

<h2>Pitch and logarithms</h2>
<p>
	Earlier, we said that adding (subtracting) intervals actually corresponds to multiplying (dividing) the ratios. This is because our ear is logarithmic. The <b>pitch</b> then, is defined as the logarithm of the frequency. An interval is a relation between notes, so taking the logarithm of that results in a pitch difference. 
</p>
<p>
	The easiest units to work with are <b>octaves</b>, which you get by taking the logarithm base 2. Another unit that is often used is <b>cents</b> (¢). Since a cent is defined as 1/1200 of an octave, you can multiply size in octaves by 1200. For the major third we have:
	$$
		\log_{2} \left( \frac{5}{4}  \right) \approx 0.3219 \text{ oct.}
		\\
		1200 \cdot \log_{2} \left( \frac{5}{4}  \right) \approx386.31 \text{¢}
	$$
	The logarithmic map naturally takes our modules under multiplication to modules under addition:
	$$
		\log_{2}\left( \enspace \prod_{i=0}^{\pi(p)} p_{i}^{a_{i}}  \right) = \sum_{i=0}^{\pi(p)}a_{i} \log_{2} \left( p_{i} \right)
	$$
	Where the basis is now the set of log-primes.
	This has the added benefit that we can use the tools of linear algebra (over the integers).

	Because all \( a_{i} \in \mathbb{Z} \), every \(p\)-limit module is isomorphic to a free \(\mathbb{Z}\)-module (free abelian group) with rank \( \pi(p) \): 
	$$
		\mathrm{J}^{p} \cong \mathbb{Z}^{\pi(p)}
	$$
	This means we can write the elements in \( \mathrm{J}^{5} \) as 3-dimensional integer vectors:
	$$
		\frac{5}{4} \simeq 

		\begin{bmatrix}
		-2 \\ 0 \\ 1
		\end{bmatrix}
		=v \in \mathbb{Z}^3
	$$
	To get back the interval size in octaves, we multiply with the basis \( \mathrm{B} \):
	$$
		\mathrm{B}v =

		\begin{bmatrix}
		\log_{2}(2) & \log_{2}(3) & \log_{2}(5)
		\end{bmatrix}

		\begin{bmatrix}
		-2 \\ 0 \\ 1
		\end{bmatrix}
		=
		\log_{2}(5) - 2  \approx 0.3219 \text{ oct.}
	$$
	The same procedure works in any \(p\)-limit.
</p>

<p>
	<a href="./tuning_mathematics2.html">Continued in part 2</a>
</p>
</div>
</body>
</html>